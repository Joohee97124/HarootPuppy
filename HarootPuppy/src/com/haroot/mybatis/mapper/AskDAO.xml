<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.haroot.mybatis.IAskDAO">
	
	<select id="askList" resultType="com.haroot.mybatis.AskDTO">
		SELECT *
		FROM ASKVIEW
		WHERE SID_CODE='SID001'
	</select>
	
	<!-- 관리자 : askNotRead, 관리자가 안읽은 고객문의 수 조회 -->
	<select id="askNotRead" resultType="java.lang.Integer">
		SELECT COUNT(*)
		FROM ASKVIEW
		WHERE ASK_READ IS NULL
	</select>
	
	<insert id="add">
	<!-- 
	INSERT INTO TBL_STUDENT(SID, NAME, TEL)
	VALUES(#{sid}, #{name}, #{tel});
	 -->
	<!-- INSERT INTO TBL_STUDENT(SID, NAME, TEL)
	VALUES(#{sid}, '#{name}', '#{tel}') --> 
	<!-- 홀따옴표로 감싸주는 것이 안전하다 -->
	</insert>	

	<select id="search" resultType="com.haroot.mybatis.AskDTO">
		<!-- SELECT SID, NAME, TEL
		FROM TBL_STUDENT
		WHERE SID= #{sid} -->
	</select>

	<!-- 아별 추가 -->
	<!-- 관리자가 읽지않은 고객문의 리스트 -->
	<select id="notHandledList" resultType="com.haroot.mybatis.AskDTO">
	<!-- 
	SELECT ASK_CODE
	, ASK_CATE_CODE
	, ASK_CATE_CONTENT
	, SID_CODE
	, MEM_NICKNAME
	, ASK_DATE
	, ASK_TITLE
	, ASK_CONTENT
	, ASK_PHOTO
	, ASK_STATE_CODE
	, ASK_STATE_CONTENT
	, ASK_READ
	FROM ASKVIEW
	WHERE ASK_STATE_CODE = 1 
	-->
	SELECT ASK_CODE
	, ASK_CATE_CODE
	, ASK_CATE_CONTENT
	, SID_CODE
	, MEM_NICKNAME
	, ASK_DATE
	, ASK_TITLE
	, ASK_CONTENT
	, ASK_PHOTO
	, ASK_STATE_CODE
	, ASK_STATE_CONTENT
	, ASK_READ
	FROM ASKVIEW
	WHERE ASK_READ IS NULL
	</select>

</mapper>