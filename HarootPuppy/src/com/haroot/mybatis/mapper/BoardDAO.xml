<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.haroot.mybatis.IBoardDAO">

	<select id="list" resultType="com.haroot.mybatis.BoardDTO">
		SELECT CATE_CONTENT, NUM, TITLE, WRITER, NICKNAME, CONTENT_DATE, VIEWNUM, LIKENUM
		FROM BOARDVIEW
		<!-- ORDER BY NUM -->
	</select>
	
	<select id="count" resultType="java.lang.Integer">
		SELECT COUNT(*) AS COUNT
		FROM BOARDVIEW
	</select>
	
	
	<!-- BOARD_CODE	BOARD_WRITER BOARD_CATE_CODE BOARD_TITLE BOARD_CONTENT BOARD_PHOTO BOARD_VIEW BOARD_LIKE BOARD_DATE -->
	<insert id="add">
		INSERT INTO TBL_BOARD(BOARD_CODE, BOARD_WRITER, BOARD_CATE_CODE, BOARD_TITLE
		                    , BOARD_CONTENT, BOARD_PHOTO, BOARD_VIEW, BOARD_LIKE, BOARD_DATE)
		VALUES(MAX(#{board_code}) + 1, '#{board_writer}', '#{board_cate_code}', '#{board_title}'
			   , '#{board_content}', '#{board_photo}', '#{board_view}', '#{board_like}'
			   , SYSDATE)
	</insert> 
	
	<select id="search" parameterType="java.lang.Integer" resultType="com.haroot.mybatis.BoardDTO">
		SELECT NUM, WRITER, HEAD_CODE, TITLE, CONTENT, PHOTO, VIEWNUM, LIKENUM, CONTENT_DATE, CATE_CONTENT
		FROM BOARDVIEW
		WHERE NUM = #{num}
	</select>
	
	<!-- parameterType="java.lang.Integer"  -->
	
	<select id="view" parameterType="map" resultType="com.haroot.mybatis.BoardDTO">
		SELECT TITLE, NICKNAME 
		FROM BOARDVIEW
		WHERE NUM = #{num} AND NICKNAME = #{nickname, jdbcType=VARCHAR}
	</select>

</mapper>
